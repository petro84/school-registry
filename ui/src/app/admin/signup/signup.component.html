<p-toast></p-toast>
<p-dialog [(visible)]="showDialog" (onHide)="close()">
  <h3 class="text-center">Create Account</h3>
  <form [formGroup]="signupForm" (ngSubmit)="createAccount(signupForm.value)">
    <div class="card mt-4">
      <div class="field grid">
        <label for="name" class="col-12 mb-2 md:col-2 md:mb-0">Name</label>
        <div class="col-12 md:col-8 md:col-offset-2">
          <input
            type="text"
            formControlName="name"
            id="name"
            [ngClass]="{
              'ng-dirty ng-invalid':
                !signupForm.controls['name'].valid &&
                signupForm.controls['name'].touched
            }"
            class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
          />
        </div>
        <span
          *ngIf="signupForm.controls['name']?.errors"
          class="col-12 md:col-8 md:col-offset-4 mt-2"
        >
          <p-message
            *ngIf="
              !signupForm.controls['name'].valid &&
              signupForm.controls['name'].touched
            "
            severity="error"
            text="Field is required."
          ></p-message>
        </span>
      </div>
      <div class="field grid">
        <label for="username" class="col-12 mb-2 md:col-2 md:mb-0"
          >Username</label
        >
        <div class="col-12 md:col-8 md:col-offset-2">
          <input
            type="text"
            id="username"
            formControlName="username"
            [ngClass]="{
              'ng-dirty ng-invalid':
                !signupForm.controls['username'].valid &&
                signupForm.controls['username'].touched
            }"
            class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
          />
        </div>
        <span
          *ngIf="signupForm.controls['username']?.errors"
          class="col-12 md:col-8 md:col-offset-4 mt-2"
        >
          <p-message
            *ngIf="signupForm.controls['username'].hasError('userExists')"
            severity="error"
            text="Username already taken."
            class="block"
          ></p-message>
          <p-message
            *ngIf="
              !signupForm.controls['username'].valid &&
              signupForm.controls['username'].touched
            "
            severity="error"
            text="Field is required."
            class="block"
          ></p-message>
        </span>
      </div>
      <div class="field grid">
        <label for="password" class="col-12 mb-2 md:col-2 md:mb-0"
          >Password</label
        >
        <div class="col-12 md:col-8 md:col-offset-2">
          <input
            type="password"
            id="password"
            formControlName="password"
            [ngClass]="{
              'ng-dirty ng-invalid':
                !signupForm.controls['password'].valid &&
                signupForm.controls['password'].touched
            }"
            class="text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
          />
        </div>
        <span
          *ngIf="signupForm.controls['password']?.errors"
          class="col-12 md:col-8 md:col-offset-4 mt-2"
        >
          <p-message
            *ngIf="
              !signupForm.controls['password'].valid &&
              signupForm.controls['password'].touched
            "
            severity="error"
            text="Field is required."
          ></p-message>
        </span>
      </div>
    </div>
    <!-- <section class="flex justify-content-center">
      <div class="flex flex-column">
        <div class="flex align-items-center my-3">
          <label for="name" class="mx-3 w-5">Name</label>
          <input
            type="text"
            formControlName="name"
            class="p-inputtext p-component w-7"
            name="name"
          />
          <p-message
            *ngIf="
              !signupForm.controls['name'].valid &&
              signupForm.controls['name'].touched
            "
            severity="error"
            text="Field is required"
          ></p-message>
        </div>
        <div class="field p-fluid my-3">
          <label for="username" class="mx-3 w-5">Username</label>
          <input
            type="text"
            formControlName="username"
            name="username"
            class="p-inputtext p-component w-7"
          />
          <div *ngIf="signupForm.controls['username']?.errors">
            <div *ngIf="signupForm.controls['username'].hasError('userExists')">
              <p-message
                severity="info"
                text="Username not available"
                w-12
              ></p-message>
            </div>
            <div *ngIf="!signupForm.controls['username'].valid && signupForm.controls['username'].touched">
              <p-message
                severity="error"
                text="Field is required"
              ></p-message>
            </div>
          </div>
        </div>
        <div class="flex align-items-center my-3">
          <label for="password" class="mx-3 w-5">Password</label>
          <input
            type="password"
            formControlName="password"
            name="password"
            class="p-inputtext p-component w-7"
          />
          <p-message
            *ngIf="
              !signupForm.controls['password'].valid &&
              signupForm.controls['password'].touched
            "
            severity="error"
            text="Field is required"
          ></p-message>
        </div>
      </div>
    </section> -->
    <div class="flex justify-content-center my-4">
      <button
        pButton
        pRipple
        type="submit"
        label="Create"
        class="mx-4"
        icon="pi pi-check"
        [disabled]="signupForm.invalid"
      ></button>
      <button
        pButton
        pRipple
        type="button"
        label="Cancel"
        class="p-button-secondary mx-4"
        icon="pi pi-times"
        (click)="close()"
      ></button>
    </div>
  </form>
</p-dialog>
